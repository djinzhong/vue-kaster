(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-605484f2"],{"0fff":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("dj-breadcrumb",{attrs:{routerList:[{router:{name:"videoList"},name:"视频列表"},{router:{name:"addVideo",query:{id:e.$route.query.id}},name:e.text+"视频"}]}}),i("el-form",{staticClass:"form",attrs:{model:e.form,"label-width":"140px",rules:e.videoRules}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{staticStyle:{width:"600px"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"播放量"}},[i("el-input",{model:{value:e.form.views,callback:function(t){e.$set(e.form,"views",t)},expression:"form.views"}})],1),i("el-form-item",{attrs:{label:"点赞数"}},[i("el-input",{model:{value:e.form.praise,callback:function(t){e.$set(e.form,"praise",t)},expression:"form.praise"}})],1),i("el-form-item",{attrs:{label:"评论数"}},[i("el-input",{model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1),i("el-form-item",{attrs:{label:"排序"}},[i("el-input",{model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1),i("el-form-item",{attrs:{label:"状态"}},[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),i("el-form-item",{attrs:{label:"上传视频",prop:"res_url"}},[i("dj-up-video",{ref:"video",attrs:{video:e.form.res_url}})],1),i("el-form-item",{attrs:{label:"上传封面"}},[i("dj-upload",{ref:"images",attrs:{max:1,filedata:e.filedata}}),i("span",{staticClass:"explain"},[e._v("默认会选择视频中第三帧画面作为封面")])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)},a=[],n=(i("c5f6"),i("e960"),i("450d"),i("b35b")),s=i.n(n),o=i("2b0e"),c=i("880a"),l=i("bdfb"),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upVideo"},[i("input",{ref:"upVideo",staticClass:"up-input",attrs:{type:"file",accept:"Video/*"},on:{change:e.upVideo}}),""===e.video_url?i("el-button",{staticClass:"up-button",attrs:{slot:"trigger",icon:"el-icon-upload",size:"small",type:"primary"},on:{click:e.selectFile},slot:"trigger"},[e._v("上传视频")]):e._e(),e.isProgress?i("el-progress",{staticClass:"up-progress",attrs:{percentage:e.upProgress,status:e.upStatus}}):e._e(),""!=e.video_url?i("el-button",{staticClass:"up-button",attrs:{icon:"el-icon-delete",size:"small",type:"primary"},on:{click:e.deleteFile}},[e._v("删除")]):e._e(),""!=e.video_url?i("video",{staticClass:"video-avatar",attrs:{src:e.video_url,controls:"controls"}},[e._v("您的浏览器不支持视频播放")]):e._e()],1)},d=[],f=(i("6b30"),i("c284")),p=i.n(f),h=i("0729"),v=i("bc3a"),m=i.n(v);o["default"].use(p.a);var b={props:{video:{type:String,default:""}},data:function(){return{baseUrl:"".concat(h["a"],"upload.php"),isProgress:!1,upProgress:0,upStatus:null,timer:null,video_url:this.video,img_url:""}},methods:{selectFile:function(){this.$refs.upVideo.dispatchEvent(new MouseEvent("click")),this.upStatus=null,this.upProgress=0,this.isProgress=!1},upVideo:function(){var e=this;if(""===this.$refs.upVideo.value)return!1;this.isProgress=!0,this.timer=setInterval(function(){80===++e.upProgress&&window.clearInterval(e.timer)},10);var t=new FormData;t.append("img",this.$refs.upVideo.files[0]),t.append("c","Upload"),t.append("a","index"),t.append("type","3"),m.a.post(this.baseUrl,t).then(this.upVideoSuccess).catch(this.upVideoErroe)},upVideoSuccess:function(e){null!==e.data.msg?(window.clearInterval(this.timer),this.upProgress=100,this.upStatus="success",this.video_url=e.data.data.img_url,this.img_url=e.data.data.cover):this.upVideoErroe()},upVideoErroe:function(){window.clearInterval(this.timer),this.$message.error("上传失败"),this.upStatus="exception",this.$refs.upVideo.value=""},deleteFile:function(){var e=this,t=new FormData;t.append("c","Upload"),t.append("a","del"),t.append("res",this.video_url),m.a.post(this.baseUrl,t).then(function(t){e.isProgress=!1,e.upProgress=0,e.upStatus=null,e.video_url="",e.$refs.upVideo.value="",e.$message("删除成功")}).catch(function(){e.$message.error("删除失败")})}}},g=b,_=(i("3b3b"),i("2877")),y=Object(_["a"])(g,u,d,!1,null,"3f1f12d4",null),x=y.exports;o["default"].use(s.a);var w={components:{DjUpload:l["a"],DjUpVideo:x},props:{data:{type:Array,default:function(){return[]}},page:Number,allPage:Number},data:function(){return{text:"新增",form:{title:"",views:"100",praise:"100",comment:"100",sort:"1",status:"1",res_url:"",cover:""},videoRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],res_url:[{required:!0,trigger:"blur"}]},filedata:[]}},computed:{id:function(){return+this.$route.query.id}},created:function(){0!==this.id&&this.initVideoForm()},methods:{initVideoForm:function(){var e=this;this.text="修改";var t=this.data.filter(function(t){return+t.id===e.id});t.length&&(this.form=t[0],this.filedata=[],""!==this.form.cover&&this.filedata.push({name:"cover.png",url:this.form.cover}))},onSubmit:function(){if(""===this.form.title)return this.$message.error("请填写标题!"),!1;if(""===this.$refs.video.video_url)return this.$message.error("请上传视频!"),!1;this.form.res_url=this.$refs.video.video_url,this.form.cover=this.$refs.video.img_url;var e=this.$refs.images.fileList;e.length&&e[0]&&e[0].url&&(this.form.cover=e[0].url),this.postVideo()},postVideo:function(){var e=this;Object(c["k"])("set",this.form).then(function(t){t&&(e.$message.success("".concat(e.text,"成功")),e.$emit("renewalVideo"),e.$router.push({name:"videoList"}))})}}},C=w,$=(i("91a6"),Object(_["a"])(C,r,a,!1,null,"11d8adde",null));t["default"]=$.exports},"11e9":function(e,t,i){var r=i("52a7"),a=i("4630"),n=i("6821"),s=i("6a99"),o=i("69a8"),c=i("c69a"),l=Object.getOwnPropertyDescriptor;t.f=i("9e1e")?l:function(e,t){if(e=n(e),t=s(t,!0),c)try{return l(e,t)}catch(i){}if(o(e,t))return a(!r.f.call(e,t),e[t])}},"3b3b":function(e,t,i){"use strict";var r=i("67bc"),a=i.n(r);a.a},"5dbc":function(e,t,i){var r=i("d3f4"),a=i("8b97").set;e.exports=function(e,t,i){var n,s=t.constructor;return s!==i&&"function"==typeof s&&(n=s.prototype)!==i.prototype&&r(n)&&a&&a(e,n),e}},"67bc":function(e,t,i){},"6b30":function(e,t,i){},"8b97":function(e,t,i){var r=i("d3f4"),a=i("cb7c"),n=function(e,t){if(a(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,i){return n(e,i),t?e.__proto__=i:r(e,i),e}}({},!1):void 0),check:n}},9093:function(e,t,i){var r=i("ce10"),a=i("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},"91a6":function(e,t,i){"use strict";var r=i("c1a0"),a=i.n(r);a.a},aa77:function(e,t,i){var r=i("5ca1"),a=i("be13"),n=i("79e5"),s=i("fdef"),o="["+s+"]",c="​",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(e,t,i){var a={},o=n(function(){return!!s[e]()||c[e]()!=c}),l=a[e]=o?t(f):s[e];i&&(a[i]=l),r(r.P+r.F*o,"String",a)},f=d.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b35b:function(e,t,i){e.exports=function(e){var t={};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=108)}({0:function(e,t,i){"use strict";function r(e,t,i,r,a,n,s,o){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),r&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):a&&(c=o?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}i.d(t,"a",function(){return r})},10:function(e,t){e.exports=i("2bb5")},108:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-switch",class:{"is-disabled":e.switchDisabled,"is-checked":e.checked},attrs:{role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled},on:{click:e.switchValue}},[i("input",{ref:"input",staticClass:"el-switch__input",attrs:{type:"checkbox",id:e.id,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled},on:{change:e.handleChange,keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.switchValue(t):null}}}),e.inactiveIconClass||e.inactiveText?i("span",{class:["el-switch__label","el-switch__label--left",e.checked?"":"is-active"]},[e.inactiveIconClass?i("i",{class:[e.inactiveIconClass]}):e._e(),!e.inactiveIconClass&&e.inactiveText?i("span",{attrs:{"aria-hidden":e.checked}},[e._v(e._s(e.inactiveText))]):e._e()]):e._e(),i("span",{ref:"core",staticClass:"el-switch__core",style:{width:e.coreWidth+"px"}}),e.activeIconClass||e.activeText?i("span",{class:["el-switch__label","el-switch__label--right",e.checked?"is-active":""]},[e.activeIconClass?i("i",{class:[e.activeIconClass]}):e._e(),!e.activeIconClass&&e.activeText?i("span",{attrs:{"aria-hidden":!e.checked}},[e._v(e._s(e.activeText))]):e._e()]):e._e()])},a=[];r._withStripped=!0;var n=i(3),s=i.n(n),o=i(20),c=i.n(o),l=i(10),u=i.n(l),d={name:"ElSwitch",mixins:[c()("input"),u.a,s.a],inject:{elForm:{default:""}},props:{value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeText:String,inactiveText:String,activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String},data:function(){return{coreWidth:this.width}},created:function(){~[this.activeValue,this.inactiveValue].indexOf(this.value)||this.$emit("input",this.inactiveValue)},computed:{checked:function(){return this.value===this.activeValue},switchDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{checked:function(){this.$refs.input.checked=this.checked,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[this.value])}},methods:{handleChange:function(e){var t=this,i=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",i),this.$emit("change",i),this.$nextTick(function(){t.$refs.input.checked=t.checked})},setBackgroundColor:function(){var e=this.checked?this.activeColor:this.inactiveColor;this.$refs.core.style.borderColor=e,this.$refs.core.style.backgroundColor=e},switchValue:function(){!this.switchDisabled&&this.handleChange()},getMigratingConfig:function(){return{props:{"on-color":"on-color is renamed to active-color.","off-color":"off-color is renamed to inactive-color.","on-text":"on-text is renamed to active-text.","off-text":"off-text is renamed to inactive-text.","on-value":"on-value is renamed to active-value.","off-value":"off-value is renamed to inactive-value.","on-icon-class":"on-icon-class is renamed to active-icon-class.","off-icon-class":"off-icon-class is renamed to inactive-icon-class."}}}},mounted:function(){this.coreWidth=this.width||40,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.$refs.input.checked=this.checked}},f=d,p=i(0),h=Object(p["a"])(f,r,a,!1,null,null,null);h.options.__file="packages/switch/src/component.vue";var v=h.exports;v.install=function(e){e.component(v.name,v)};t["default"]=v},20:function(e,t){e.exports=i("12f2")},3:function(e,t){e.exports=i("d010")}})},bdfb:function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{attrs:{action:e.baseUrl,accept:"image/*",name:"img",data:e.upData,"list-type":"picture-card",limit:e.max,"file-list":e.fileList,"http-request":e.upRequest,"on-preview":e.handlePictureCardPreview,"on-success":e.upWin,"on-exceed":e.upExceed,"on-remove":e.handleRemove}},[i("i",{staticClass:"el-icon-plus"})]),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},a=[],n=(i("7f7f"),i("c5f6"),i("bc3a")),s=i.n(n),o=i("0729"),c={props:{type:{type:String,default:"image"},max:{type:Number,default:1},filedata:{type:Array,default:function(){return[]}}},data:function(){return{fileList:this.filedata,baseUrl:"".concat(o["a"],"upload.php"),upData:{c:"Upload",a:"index",type:5},dialogImageUrl:"",dialogVisible:!1}},methods:{upRequest:function(e){var t=new FormData;for(var i in t.append(e.filename,e.file),e.data)t.append(i,e.data[i]);s.a.post(e.action,t).then(e.onSuccess).catch(this.upLoser)},upWin:function(e,t){e.data.data?this.fileList.push({name:t.name,url:e.data.data.img_url}):this.upLoser(e)},upLoser:function(e){e.data?this.$message.error(e.data):this.$message.error(e)},handleRemove:function(e,t){var i=this,r=new FormData;r.append("c","Upload"),r.append("a","del"),r.append("res",e.url),s.a.post(this.baseUrl,r).then(function(e){i.$message("删除成功")}).catch(function(){i.$message.error("删除失败")}),this.fileList=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},upExceed:function(){this.$message("最多上传".concat(this.max,"张图片"))}}},l=c,u=i("2877"),d=Object(u["a"])(l,r,a,!1,null,null,null);t["a"]=d.exports},c1a0:function(e,t,i){},c5f6:function(e,t,i){"use strict";var r=i("7726"),a=i("69a8"),n=i("2d95"),s=i("5dbc"),o=i("6a99"),c=i("79e5"),l=i("9093").f,u=i("11e9").f,d=i("86cc").f,f=i("aa77").trim,p="Number",h=r[p],v=h,m=h.prototype,b=n(i("2aeb")(m))==p,g="trim"in String.prototype,_=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var i,r,a,n=t.charCodeAt(0);if(43===n||45===n){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===n){switch(t.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+t}for(var s,c=t.slice(2),l=0,u=c.length;l<u;l++)if(s=c.charCodeAt(l),s<48||s>a)return NaN;return parseInt(c,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof h&&(b?c(function(){m.valueOf.call(i)}):n(i)!=p)?s(new v(_(t)),i,h):_(t)};for(var y,x=i("9e1e")?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)a(v,y=x[w])&&!a(h,y)&&d(h,y,u(v,y));h.prototype=m,m.constructor=h,i("2aba")(r,p,h)}},e960:function(e,t,i){},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-605484f2.0c377eb6.js.map