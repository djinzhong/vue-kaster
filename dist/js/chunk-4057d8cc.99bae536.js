(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4057d8cc"],{"02f4":function(t,e,r){var n=r("4588"),i=r("be13");t.exports=function(t){return function(e,r){var a,o,u=String(i(e)),c=n(r),s=u.length;return c<0||c>=s?t?"":void 0:(a=u.charCodeAt(c),a<55296||a>56319||c+1===s||(o=u.charCodeAt(c+1))<56320||o>57343?t?u.charAt(c):a:t?u.slice(c,c+2):o-56320+(a-55296<<10)+65536)}}},"0390":function(t,e,r){"use strict";var n=r("02f4")(!0);t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},"0bfb":function(t,e,r){"use strict";var n=r("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},1039:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("dj-breadcrumb",{attrs:{routerList:[{router:{name:"schoolList"},name:"学堂列表"},{router:{name:"addSchool",query:{id:t.$route.query.id}},name:t.text+"学堂"}]}}),r("el-form",{staticClass:"form",attrs:{model:t.form,"label-width":"140px",rules:t.schoolRules}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{staticStyle:{width:"600px"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input",{model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),t.isHandle?r("el-form-item",{attrs:{label:"类型"}},[r("el-radio-group",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[r("el-radio",{attrs:{label:"1"}},[t._v("新增详情")]),r("el-radio",{attrs:{label:"2"}},[t._v("新增菜单")])],1)],1):t._e(),r("el-form-item",{attrs:{label:"导航菜单"}},[r("el-radio-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.typeList,function(e){return r("el-radio",{key:e.value,attrs:{label:e.value.toString()}},[t._v(t._s(e.text))])}),1),"1"===t.type?r("span",{staticClass:"explain"},[t._v("备注:如果没有找到相应的菜单,请选择新增菜单进行增加")]):r("span",{staticClass:"explain"},[t._v("备注:目前只支持添加速度赛马和马业")])],1),"1"===t.type?r("el-form-item",{attrs:{label:"图片菜单"}},[r("el-radio-group",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}},t._l(t.codeList,function(e){return r("el-radio",{key:e.value,attrs:{label:e.value.toString()}},[t._v(t._s(e.text))])}),1)],1):t._e(),"2"===t.type?r("el-form-item",{attrs:{label:"code"}},[r("el-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),r("i",{staticClass:"el-icon-warning",on:{click:function(e){t.isExplain=!t.isExplain}}}),t.isExplain?t._e():r("span",{staticClass:"explain"},[t._v("点击查看已有code")]),t.isExplain?r("span",{staticClass:"explain"},[t._v(t._s(t.codeList))]):t._e()],1):t._e(),"2"===t.type?r("el-form-item",{attrs:{label:"上传封面"}},[r("dj-upload",{ref:"images",attrs:{max:1,filedata:t.filedata}})],1):t._e(),"1"===t.type?r("el-form-item",{attrs:{label:"详情内容"}},[r("dj-ueditor",{ref:"ueditor",attrs:{content:t.form.content}})],1):t._e(),r("el-form-item",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)},i=[],a=(r("55dd"),r("880a")),o=r("3849"),u=r("bdfb"),c=r("e759"),s={components:{DjUpload:u["a"],DjUeditor:c["a"]},props:{data:{type:Array,default:function(){return[]}}},computed:{typeList:function(){switch(this.type){case"1":return o["b"].filter(function(t){return 5!==t.value});case"2":return o["b"].filter(function(t){return 3===t.value||4===t.value});default:return o["b"]}},speed:function(){var t=this.data.filter(function(t){return 3===+t.type}),e=t.map(function(t){return{text:t.title,value:+t.code}});return e},industry:function(){var t=this.data.filter(function(t){return 4===+t.type}),e=t.map(function(t){return{text:t.title,value:+t.code}});return e},codeList:function(){switch(this.form.type){case"1":return[{text:"马球运动",value:"1000"}];case"2":return[{text:"马术比赛",value:"999"}];case"3":return this.speed;case"4":return this.industry;case"5":return this.speed.concat(this.industry);default:return[]}},id:function(){return+this.$route.query.id},isHandle:function(){return 0===this.id}},data:function(){return{form:{operate_type:1,title:"",type:"1",code:"1000",sort:"",content:"",icon:""},type:"1",text:"新增",schoolRules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],sort:[{required:!0,message:"请输入排序号",trigger:"blur"}]},filedata:[],isExplain:!1}},created:function(){this.isHandle||this.initSchoolForm()},methods:{initSchoolForm:function(){var t=this;this.text="修改";var e=this.data.filter(function(e){return+e.id===t.id});e.length&&(this.form=e[0],this.form.operate_type=2,"3"!==this.form.type&&"4"!==this.form.type||(this.type="2",this.filedata=[],this.form.icon&&this.filedata.push({name:"icon.png",url:this.form.icon})))},onSubmit:function(){var t=this;if(""===this.form.title||""===this.form.sort)return this.$message.error("请填写信息完整"),!1;if("1"===this.type)"3"!==this.form.type&&"4"!==this.form.type||(this.form.type="5"),this.$refs.ueditor&&this.$refs.ueditor.msg&&(this.form.content=this.$refs.ueditor.msg);else{var e=this.speed.concat(this.industry).some(function(e){return e.value===+t.form.code});if(e)return this.$message.error("请不要填写重复的code"),!1;var r=this.$refs.images.fileList;if(!r.length)return this.$message.error("请上传菜单封面"),!1;r[0]&&r[0].url&&(this.form.icon=r[0].url)}this.postSchool()},postSchool:function(){var t=this;Object(a["h"])("operate",this.form).then(function(e){e&&(t.$message.success("".concat(t.text,"成功")),t.$emit("renewalSchool"),t.$router.push({name:"schoolList"}))})}}},l=s,f=(r("c476"),r("2877")),p=Object(f["a"])(l,n,i,!1,null,"0e3cf00e",null);e["default"]=p.exports},"11e9":function(t,e,r){var n=r("52a7"),i=r("4630"),a=r("6821"),o=r("6a99"),u=r("69a8"),c=r("c69a"),s=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?s:function(t,e){if(t=a(t),e=o(e,!0),c)try{return s(t,e)}catch(r){}if(u(t,e))return i(!n.f.call(t,e),t[e])}},"1e4e":function(t,e,r){"use strict";r("28a5");var n=["日","一","二","三","四","五","六"];function i(t,e){t+="";var r=0;13===t.length?r=new Date(+t):t.length<13&&(r=new Date(1e3*t));var i=r.getFullYear(),a=r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,o=r.getDate()<10?"0"+r.getDate():r.getDate(),u=r.getHours()<10?"0"+r.getHours():r.getHours(),c=r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes();if(""!==t&&void 0!==t)switch(e){case"day":return i+"/"+a+"/"+o;case"week":return i+"/"+a+"/"+o+" 星期"+n[r.getDay()];case"time":return u+":"+c;case"slash":return i+"/"+a+"/"+o;case"mouth":return a+"/"+o;default:return i+"/"+a+"/"+o+" "+u+":"+c}}r.d(e,"a",function(){return a}),r.d(e,"b",function(){return o}),r.d(e,"c",function(){return u});var a=function(t,e){return function(r){return i(r[t],e)}},o=function(t,e,r){return function(n){var i=n[t].split(e).length;return r?i-1:i}},u=function(t,e){return function(r){var n=e.filter(function(e){return e.value===+r[t]});return n[0].text?n[0].text:"未知"}}},"214f":function(t,e,r){"use strict";r("b0c5");var n=r("2aba"),i=r("32e9"),a=r("79e5"),o=r("be13"),u=r("2b4c"),c=r("520a"),s=u("species"),l=!a(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var p=u(t),d=!a(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),h=d?!a(function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[s]=function(){return r}),r[p](""),!e}):void 0;if(!d||!h||"replace"===t&&!l||"split"===t&&!f){var m=/./[p],v=r(o,p,""[t],function(t,e,r,n,i){return e.exec===c?d&&!i?{done:!0,value:m.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),g=v[0],b=v[1];n(String.prototype,t,g),i(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"28a5":function(t,e,r){"use strict";var n=r("aae3"),i=r("cb7c"),a=r("ebd6"),o=r("0390"),u=r("9def"),c=r("5f1b"),s=r("520a"),l=r("79e5"),f=Math.min,p=[].push,d="split",h="length",m="lastIndex",v=4294967295,g=!l(function(){RegExp(v,"y")});r("214f")("split",2,function(t,e,r,l){var b;return b="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[h]||2!="ab"[d](/(?:ab)*/)[h]||4!="."[d](/(.?)(.?)/)[h]||"."[d](/()()/)[h]>1||""[d](/.?/)[h]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!n(t))return r.call(i,t,e);var a,o,u,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,d=void 0===e?v:e>>>0,g=new RegExp(t.source,l+"g");while(a=s.call(g,i)){if(o=g[m],o>f&&(c.push(i.slice(f,a.index)),a[h]>1&&a.index<i[h]&&p.apply(c,a.slice(1)),u=a[0][h],f=o,c[h]>=d))break;g[m]===a.index&&g[m]++}return f===i[h]?!u&&g.test("")||c.push(""):c.push(i.slice(f)),c[h]>d?c.slice(0,d):c}:"0"[d](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}:r,[function(r,n){var i=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,i,n):b.call(String(i),r,n)},function(t,e){var n=l(b,t,this,e,b!==r);if(n.done)return n.value;var s=i(t),p=String(this),d=a(s,RegExp),h=s.unicode,m=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(g?"y":"g"),x=new d(g?s:"^(?:"+s.source+")",m),y=void 0===e?v:e>>>0;if(0===y)return[];if(0===p.length)return null===c(x,p)?[p]:[];var _=0,w=0,E=[];while(w<p.length){x.lastIndex=g?w:0;var I,S=c(x,g?p:p.slice(w));if(null===S||(I=f(u(x.lastIndex+(g?0:w)),p.length))===_)w=o(p,w,h);else{if(E.push(p.slice(_,w)),E.length===y)return E;for(var $=1;$<=S.length-1;$++)if(E.push(S[$]),E.length===y)return E;w=_=I}}return E.push(p.slice(_)),E}]})},"2f21":function(t,e,r){"use strict";var n=r("79e5");t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},3849:function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"b",function(){return a});var n=r("1e4e"),i=r("91a5"),a=[{text:"马球运动详情",value:1},{text:"马术比赛详情",value:2},{text:"速度赛马",value:3},{text:"马业",value:4},{text:"速度赛马/马业详情",value:5}],o=[{prop:"id",width:"50",label:"ID"},{prop:"title",width:null,label:"标题"},{prop:"type",width:"200",label:"导航菜单",formatter:Object(n["c"])("type",a),filters:a,filterMethod:Object(i["a"])("type")},{prop:"code",width:"200",label:"图片菜单"},{prop:"code",width:"100",label:"code"},{prop:"sort",width:"200",label:"优先级",sortable:!0}]},"520a":function(t,e,r){"use strict";var n=r("0bfb"),i=RegExp.prototype.exec,a=String.prototype.replace,o=i,u="lastIndex",c=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[u]||0!==e[u]}(),s=void 0!==/()??/.exec("")[1],l=c||s;l&&(o=function(t){var e,r,o,l,f=this;return s&&(r=new RegExp("^"+f.source+"$(?!\\s)",n.call(f))),c&&(e=f[u]),o=i.call(f,t),c&&o&&(f[u]=f.global?o.index+o[0].length:e),s&&o&&o.length>1&&a.call(o[0],r,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(o[l]=void 0)}),o}),t.exports=o},"55dd":function(t,e,r){"use strict";var n=r("5ca1"),i=r("d8e8"),a=r("4bf8"),o=r("79e5"),u=[].sort,c=[1,2,3];n(n.P+n.F*(o(function(){c.sort(void 0)})||!o(function(){c.sort(null)})||!r("2f21")(u)),"Array",{sort:function(t){return void 0===t?u.call(a(this)):u.call(a(this),i(t))}})},"5dbc":function(t,e,r){var n=r("d3f4"),i=r("8b97").set;t.exports=function(t,e,r){var a,o=e.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&n(a)&&i&&i(t,a),t}},"5f1b":function(t,e,r){"use strict";var n=r("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var a=r.call(t,e);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"76bb":function(t,e,r){},"8b97":function(t,e,r){var n=r("d3f4"),i=r("cb7c"),a=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r("9b43")(Function.call,r("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,r){return a(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:a}},9093:function(t,e,r){var n=r("ce10"),i=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},"91a5":function(t,e,r){"use strict";r.d(e,"a",function(){return n});var n=function(t){return function(e,r){return+r[t]===e}}},aa77:function(t,e,r){var n=r("5ca1"),i=r("be13"),a=r("79e5"),o=r("fdef"),u="["+o+"]",c="​",s=RegExp("^"+u+u+"*"),l=RegExp(u+u+"*$"),f=function(t,e,r){var i={},u=a(function(){return!!o[t]()||c[t]()!=c}),s=i[t]=u?e(p):o[t];r&&(i[r]=s),n(n.P+n.F*u,"String",i)},p=f.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(s,"")),2&e&&(t=t.replace(l,"")),t};t.exports=f},aae3:function(t,e,r){var n=r("d3f4"),i=r("2d95"),a=r("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},b0c5:function(t,e,r){"use strict";var n=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},bdfb:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-upload",{attrs:{action:t.baseUrl,accept:"image/*",name:"img",data:t.upData,"list-type":"picture-card",limit:t.max,"file-list":t.fileList,"http-request":t.upRequest,"on-preview":t.handlePictureCardPreview,"on-success":t.upWin,"on-exceed":t.upExceed,"on-remove":t.handleRemove}},[r("i",{staticClass:"el-icon-plus"})]),r("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},i=[],a=(r("7f7f"),r("c5f6"),r("bc3a")),o=r.n(a),u=r("0729"),c={props:{type:{type:String,default:"image"},max:{type:Number,default:1},filedata:{type:Array,default:function(){return[]}}},data:function(){return{fileList:this.filedata,baseUrl:"".concat(u["a"],"upload.php"),upData:{c:"Upload",a:"index",type:5},dialogImageUrl:"",dialogVisible:!1}},methods:{upRequest:function(t){var e=new FormData;for(var r in e.append(t.filename,t.file),t.data)e.append(r,t.data[r]);o.a.post(t.action,e).then(t.onSuccess).catch(this.upLoser)},upWin:function(t,e){t.data.data?this.fileList.push({name:e.name,url:t.data.data.img_url}):this.upLoser(t)},upLoser:function(t){t.data?this.$message.error(t.data):this.$message.error(t)},handleRemove:function(t,e){var r=this,n=new FormData;n.append("c","Upload"),n.append("a","del"),n.append("res",t.url),o.a.post(this.baseUrl,n).then(function(t){r.$message("删除成功")}).catch(function(){r.$message.error("删除失败")}),this.fileList=e},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},upExceed:function(){this.$message("最多上传".concat(this.max,"张图片"))}}},s=c,l=r("2877"),f=Object(l["a"])(s,n,i,!1,null,null,null);e["a"]=f.exports},c476:function(t,e,r){"use strict";var n=r("76bb"),i=r.n(n);i.a},c5f6:function(t,e,r){"use strict";var n=r("7726"),i=r("69a8"),a=r("2d95"),o=r("5dbc"),u=r("6a99"),c=r("79e5"),s=r("9093").f,l=r("11e9").f,f=r("86cc").f,p=r("aa77").trim,d="Number",h=n[d],m=h,v=h.prototype,g=a(r("2aeb")(v))==d,b="trim"in String.prototype,x=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():p(e,3);var r,n,i,a=e.charCodeAt(0);if(43===a||45===a){if(r=e.charCodeAt(2),88===r||120===r)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var o,c=e.slice(2),s=0,l=c.length;s<l;s++)if(o=c.charCodeAt(s),o<48||o>i)return NaN;return parseInt(c,n)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof h&&(g?c(function(){v.valueOf.call(r)}):a(r)!=d)?o(new m(x(e)),r,h):x(e)};for(var y,_=r("9e1e")?s(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)i(m,y=_[w])&&!i(h,y)&&f(h,y,l(m,y));h.prototype=v,v.constructor=h,r("2aba")(n,d,h)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-4057d8cc.99bae536.js.map